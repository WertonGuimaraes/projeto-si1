<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>Perfil</title>	
	</h:head>
	
	<h:body> 
		<p:layout fullPage="true" style="width:100%;height:100%">
			
			<p:layoutUnit position="north" style="background:#36648B;">
				<h:form id="formLogoff" style="background:#36648B;">
					<p align="right">
    					<p:commandLink value="Logout" action="#{perfilBean.logoffButton}" style="float:right !important;margin:'0px 0px 98754px 0px';background:#36648B;" />
       				</p>
        		</h:form>
			</p:layoutUnit>
			
			<p:layoutUnit position="west" size="400"  minSize="300">
				<h2 align="center"><font size="4" color="#36648B">Seja bem vindo #{perfilBean.usuario.nome} </font></h2>
				<p:graphicImage url="http://blog.cancaonova.com/cantinho/files/2011/09/box-home-clube-PP.jpg" width="410"/> 
				
				<br />
				
				<p:commandButton id="modalDialogButton" value="Cadastrar carona"
					onclick="dlg2.show()" type="button" />
				
			</p:layoutUnit>
			
			<p:layoutUnit position="center" size="800" minSize="300">
				<p align="center"> <font size="10" color="#36648B">Carona Book </font></p>
				<p:separator id="separator3" style="width:3px;height:800" />
				
				<h:form>
					<p:panelGrid columns="5" style="border-style: hidden !important;">
						<p:outputLabel value="Origem"/> 
						<p:inputText id="inOrigem" value="#{perfilBean.origem}" label="Origem" /> 
						
						<p:outputLabel value="Destino"/> 
						<p:inputText id="inDestino" value="#{perfilBean.destino}" label="Destino" /> 
						
						<p:commandButton id="btSearchCaronas" value="Buscar carona"
						action="#{perfilBean.localizaCaronasDisponiveis}" update="dtCaronasDisponiveis"/> 
					</p:panelGrid>
				
					<p:dataTable id="dtCaronasDisponiveis" headerText="Caronas disponÃ­veis" var="carona" value="#{perfilBean.caronasDisponiveis}" >
				        
				        <p:column  headerText="Origem">  
				            <h:outputText id="outOrigem" value="#{carona.origem}" />  
				        </p:column>  
				  
				        <p:column headerText="Destino">  
				            <h:outputText id="outDestino" value="#{carona.destino}" />  
				        </p:column>  
				        
				        <p:column  headerText="Data">  
				            <h:outputText id="outData" value="#{carona.date}" />  
				        </p:column> 
				        
				        <p:column  headerText="Hora">  
				            <h:outputText id="outHora" value="#{carona.hour}" />  
				        </p:column>  
				        
				        <p:column headerText="Vagas">  
				            <h:outputText id="outVagas" value="#{carona.vagas}" />  
				        </p:column>       
		        
		    		</p:dataTable>  		    					
				</h:form>				
			</p:layoutUnit>
			
		</p:layout>
		
		<p:dialog id="cadastrarCaronaDialog" header="Cadastrar Carona" closable="true"
					widgetVar="dlg2" modal="true" height="550" width="700">
			<p:panel header="Cadastrar carona">
				<p:messages id="messages" showDetail="false" autoUpdate="true" />
				<h:form>
					<p:panelGrid columns="2" id="cadastraCaronaGrid" autoUpdate="true">
						<h:outputLabel id="outOrigemlb"  value="Origem: " />
						<p:inputText id="inOrigem"  autocomplete="true" value="#{perfilBean.origem}" />
						
						<h:outputLabel id="outDestinolb"  value="Destino: " />
						<p:inputText id="inDestino"  autocomplete="true" value="#{perfilBean.destino}"  />
						
						<h:outputLabel id="outDatalb"  value="Data: " />
						<p:inputText id="inData"  autocomplete="true" value="#{perfilBean.data}"  />
						
						<h:outputLabel id="outHoralb" value="Hora: " />
						<p:inputText id="inHora"  autocomplete="true" value="#{perfilBean.hora}"  />
						
						<h:outputLabel id="outVagaslb"  value="Vagas: " />
						<p:inputText id="inVagas"  autocomplete="true"  value="#{perfilBean.vagas}" />
	
					</p:panelGrid>
	
					<p:commandButton id="btCreate" value="Cadastrar nova carona" action="#{perfilBean.cadastrarCarona}"  onsuccess="dlg2.hide() #{perfilBean.caronasDisponiveis}" update="inOrigem,inDestino,inData,
					inHora,inVagas" />
					<p:commandButton id="btBack" value="Fechar"  onclick="dlg2.close()" action="#{perfilBean.redirectPerfil}" update="inOrigem,inDestino,inData,
					inHora,inVagas" />
				</h:form>
			</p:panel>
		</p:dialog>
		
	</h:body>

</html>




